<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">

    <title>SkyStitch</title>

    <!-- Bootstrap core CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="css/justified-nav.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>

  <body>

    <div class="container">

      <!-- The justified navigation menu is meant for single line per list item.
           Multiple lines will require custom code not provided by Bootstrap. -->
      <div class="masthead">
        <nav>
          <ul class="nav nav-justified">
            <li><a href="index.html">Home</a></li>
            <li class="active"><a href="#">Project Details</a></li>
	    <li><a href="sample_videos.html">Sample Videos</a></li>
	    <li><a href="gallery.html">Gallery</a></li>
	    <li><a href="publications.html">Publications</a></li>
          </ul>
        </nav>
      </div>

      <h2> Source Code </h2>
      <p>Unfortunately, currently I don't have time to clean up the
      code to make it easily compile on any system, because it
      requires both ARM and x86 toolchains to make a full build. Also
      there are a quite number of commercial interests so I need to
      prepare a proper license to avoid any copyright issue in the
      future. </p>
      <p style="color:#F00"> Since currently I am applying for PhD, I am happy to provide
      the source code if the admission committee is interested. Kindly
      email me and I will send you the whole tarball.</p>
      

	<h2> Our Quadcopter Prototype </h2>
	<p>
	  Our quadcopter prototype has gone through a few iterations
	  of modifications due to various requirements added as the
	  project went on. For example, previously the landing gear
	  was short, but in order to lower the WiFi antennas for
	  better signal quality we made a longer landing gear to
	  increase the clearence.
	</p>
	<p>
	  Our current version is a bit heavy (2.1 kg with battery) and
	  the hovering time is within 7 min. Due to time and budget
	  constraints we did not further refine the design for longer
	  flight time. We plan to build a new version with a larger
	  body and bigger propellers for higher efficiency.
	</p>
	<p>
	  Below is the picture of our prototype quadcopter and the
	  list of parts. We constructed two quadcopters of the same
	  design.
	</p>
	<p>
	  <b>(Nov 2015 Updated)</b>
	  <a href="https://developer.dji.com">DJI</a> has released a
	  developer edition of their UAV products. The developer kit
	  consists of the UAV flying platform, the on-board computer
	  (exactly the same as ours) and miscellaneous peripherals. If
	  you are interested in building a similar platform like
	  SkyStitch, it might be a better option.
	</p>
	<div class="row">
	  <div class="col-lg-7">
	    <img src="images/quad2.jpg" style="width:100%"/>
	  </div>
	  <div class="col-lg-5">
	    <table class="table">
	      <thead>
		<tr>
		  <th>Components</th>
		  <th>Model</th>
		</tr>
	      </thead>
	      <tbody align="left">
		<tr>
		  <td>Flight controller</td>
		  <td>Ardupilot Mega 2.6</td>
		</tr>
		<tr>
		  <td>GPS receiver</td>
		  <td>uBlox LEA-6H</td>
		</tr>
		<tr>
		  <td>Motor</td>
		  <td>SunnySky X3108S</td>
		</tr>
		<tr>
		  <td>Electronic speed controller</td>
		  <td>HobbyWing 30A OPTO</td>
		</tr>
		<tr>
		  <td>Propeller</td>
		  <td>APC 12x3.8</td>
		</tr>
		<tr>
		  <td>Airframe</td>
		  <td>HobbyKing X550</td>
		</tr>
		<tr>
		  <td>On-board computer</td>
		  <td>NVIDIA Jetson TK1</td>
		</tr>
		<tr>
		  <td>Camera</td>
		  <td>PointGrey BlackFly 14S2C</td>
		</tr>
		<tr>
		  <td>Lens</td>
		  <td>Computar H0514-MP2</td>
		</tr>
		<tr>
		  <td>WiFi adaptor</td>
		  <td>Compex WLE350NX</td>
		</tr>
	      </tbody>
	    </table>
	  </div>
	</div>

	<hr>

	

      <h2>Imaging System </h2>
      
      <div class="row">
      <div class="col-lg-7">
	<img src="images/camera.jpg" style="width:100%"/>
      </div>
      <div class="col-lg-5">
	<p class="text-justify">
	  The camera on each quadcopter is a PointGrey BlackFly 14S2C
	  Ethernet camera with a resolution of 1280x1024.  The lens
	  mounted onto the camera is a low-distortion lens with a
	  62.3&deg diagonal field of view. Camara frames are streamed
	  to the on-board computer in YUV411 format.
	</p>
	<p>
	  The camera supports a max frame rate of 60 fps. However,
	  since it is equipped with a rolling shutter, it can only run
	  at half of the max frame rate in external-trigger mode
	  (refer to PointGrey's documentation). In practice, it only
	  runs reliably at a max frame rate of 22 fps in
	  external-trigger mode. Therefore in our experiments, we
	  fixed the frame rate to be 20 fps.
	</p>
	<p>
	  A camera with a global shutter could support higher frame
	  rate in external-trigger mode. Due to their high prices we
	  did not choose them for our project.
	</p>
      </div>
      </div>

      </br>

      <div class="row">
      <div class="col-lg-7">
	<img src="images/video_sync.jpg" style="width:100%"/>
      </div>
      <div class="col-lg-5">
	<p class="text-justify">
	  To synchronize videos from multiple quadcopters, we
	  connected the time pulse pin of the GPS receiver on each
	  quadcopter to the external shutter trigger of the camera.
	</p>
	<p>
	  The time pulse pin only sends UTC-aligned pulses and does
	  not provide any time reference. The camera only maintains a
	  trigger counter which increases every time a new pulse is
	  received. In order to know the precise time of each pulse, a
	  handshake procedure has to be performed among the GPS
	  receiver, the flight controller and the on-board computer.
	</p>
      </div>
      </div>

      <hr>

      <h2> On-board computer </h2>

      <div class="row">
      <div class="col-lg-7">
	<img src="images/jetson_tk1.jpg" style="width:100%"/>
      </div>
      <div class="col-lg-5">
	<p class="text-justify">
	  We chose NVIDIA Jetson TK1 as our on-board computer because it has:
	  <ul class="list-group text-justify">
	    <li>A 192-core CUDA-capable GPU for on-board image processing.</li>
	    <li>A high-performance quad-core CPU for multi-tasking.</li>
	    <li>A H.264 encoder for video encoding.</li>
	    <li>A serial I/O port for communication with the flight controller.</li>
	    <li>A mini PCI-e slot for installing a WiFi card.</li>
	  </ul>
	  The on-board computer is responsible for preprocessing the
	  incoming camera frames, including:
	</p>
	  <ul class="list-group text-justify">
	    <li>Rectifying lens distortion and extracting features from each frame.</li>
	    <li>Computing an optical flow homography between two adjacent frames.</li>
	    <li>Encoding each frame into H.264 format.</li>
	  </ul>
	<p class="text-justify"/> After preprocessing is finished, the
	  on-board computer packages the data and sends it to the
	  ground station through three WiFi antennas.
	</p>
      </div>
      </div>

    </div> <!-- /container -->

    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="js/ie10-viewport-bug-workaround.js"></script>
  </body>
</html>
